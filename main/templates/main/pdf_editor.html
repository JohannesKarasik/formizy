{% extends "main/base.html" %}
{% load static %}

{% block title %}
   {{ form_info.title }} — PDF Editor
{% endblock %}

{% block content %}

<main class="content-main">

    <form id="csrf-form">{% csrf_token %}</form>

    <h1 style="text-align:center;">{{ form_info.title }}</h1>

    <!-- Load PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <!-- PDF Viewer UI -->
    <div class="viewer-frame">

        <div class="viewer-toolbar">
            <div class="viewer-toolbar-left">PDF-Editor</div>
            <div class="viewer-toolbar-right">
                <button onclick="zoomOut()" class="toolbar-btn">−</button>
                <span id="zoom-label">100%</span>
                <button onclick="zoomIn()" class="toolbar-btn">+</button>

                {% if not user.is_authenticated %}
                <button class="toolbar-btn toolbar-btn-primary" onclick="saveFieldsAndOpenAuth()">
                    PDF herunterladen
                </button>
                {% else %}
                <button class="toolbar-btn toolbar-btn-primary" onclick="saveFieldsAndDownload()">
                    PDF herunterladen
                </button>
                {% endif %}
            </div>
        </div>

        <div id="fullscreen-btn">⤢ Vollbild</div>

        <div id="pdf-scroll">
            <div id="pdf-container">
                <div id="pdf-pages"></div>
            </div>
        </div>
    </div>

</main>

<!-- INCLUDE YOUR FULL JAVASCRIPT BLOCK HERE -->

{% endblock %}
